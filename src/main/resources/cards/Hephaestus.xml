<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Card SYSTEM "CardSchema.dtd">
<Card>
    <name>Hephaestus</name>
    <description>
        Your Build: Your Worker may build one additional block (not dome) on top of your first block.
    </description>
    <rules>
        <rule event="BUILD">
            <statements>
                <if> <!--Sei il possessore della carta-->
                    <subject>YOU</subject>
                    <verb>PLAYER_EQUALS</verb>
                    <object>CARD_OWNER</object>
                </if>
                <if> <!--Vuoi costruire 2 edifici-->
                    <subject>YOU</subject>
                    <verb>BUILD_NUM</verb>
                    <object>2</object>
                </if>
                <if> <!--Le posizioni dell'edificio 1 e 2 corrispondono-->
                    <subject>YOU</subject>
                    <verb>BUILD_IN_SAME_SPOT</verb>
                    <object>ALL</object>
                </if>
                <nif> <!--Non vuoi però costruire cupole sul terzo piano-->
                    <subject>YOU</subject>
                    <verb>BUILD_DOME</verb>
                    <object>THIRD_FLOOR</object>
                </nif>
                <!--Verranno aggiunti
                <if> Se ti sei mosso
                    <subject>YOU</subject>
                    <verb>STATE_EQUALS</verb>
                    <object>MOVED</object>
                </if>
                <nif> Non vuoi costruire cupole su un livello diverso dal terzo
                    <subject>YOU</subject>
                    <verb>BUILD_DOME_EXCEPT</verb>
                    <object>THIRD_FLOOR</object>
                </nif> In realtà basterebbe predicato EXISTS_DOME, e così si tolgono sia questo che BUILD_DOME per questa regola
                -->
            </statements>
            <effect>
                <type>ALLOW</type>
                <!--Verrà aggiunto
                <nextstate>BUILT</nextstate>
                -->
                <!--
                    (APPLY)     > Si occupa della verifica che le celle di destinazione
                                  non siano occupate da un worker o da una cupola
                                > Controlla che la consecutio degli edifici sia corretta
                                  (con eccezione per le cupole, il cui controllo è lasciato a
                                   BUILD_DOME_EXCEPT)
                -->
            </effect>
        </rule>
    </rules>
</Card>